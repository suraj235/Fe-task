{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/FE%20Task/product-card/lib/encryption.ts"],"sourcesContent":["import crypto from 'crypto';\r\nconst ALGORITHM = 'aes-256-gcm';\r\nconst IV_LENGTH = 16;\r\nconst AUTH_TAG_LENGTH = 16;\r\nconst ENCRYPTION_KEY = process.env.ENCRYPTION_KEY || '';\r\n\r\nif (!ENCRYPTION_KEY) {\r\n  throw new Error('ENCRYPTION_KEY environment variable is not set');\r\n}\r\n\r\n// Derive a 32-byte key from the environment variable\r\nconst getKey = (): Buffer => {\r\n  return crypto.scryptSync(ENCRYPTION_KEY, 'salt', 32);\r\n};\r\n\r\nexport interface EncryptedData {\r\n  encrypted: string;\r\n  iv: string;\r\n  authTag: string;\r\n}\r\n\r\n// Encrypts data using AES-256-GCM\r\nexport function encrypt(text: string): EncryptedData {\r\n  const iv = crypto.randomBytes(IV_LENGTH);\r\n  const key = getKey();\r\n  \r\n  const cipher = crypto.createCipheriv(ALGORITHM, key, iv);\r\n  \r\n  let encrypted = cipher.update(text, 'utf8', 'base64');\r\n  encrypted += cipher.final('base64');\r\n  \r\n  const authTag = cipher.getAuthTag();\r\n  \r\n  return {\r\n    encrypted,\r\n    iv: iv.toString('base64'),\r\n    authTag: authTag.toString('base64'),\r\n  };\r\n}\r\n\r\n// Decrypts data using AES-256-GCM\r\nexport function decrypt(encryptedData: EncryptedData): string {\r\n  const key = getKey();\r\n  const iv = Buffer.from(encryptedData.iv, 'base64');\r\n  const authTag = Buffer.from(encryptedData.authTag, 'base64');\r\n  \r\n  const decipher = crypto.createDecipheriv(ALGORITHM, key, iv);\r\n  decipher.setAuthTag(authTag);\r\n  \r\n  let decrypted = decipher.update(encryptedData.encrypted, 'base64', 'utf8');\r\n  decrypted += decipher.final('utf8');\r\n  \r\n  return decrypted;\r\n}"],"names":[],"mappings":";;;;;;AAAA;;AACA,MAAM,YAAY;AAClB,MAAM,YAAY;AAClB,MAAM,kBAAkB;AACxB,MAAM,iBAAiB,QAAQ,GAAG,CAAC,cAAc,IAAI;AAErD,IAAI,CAAC,gBAAgB;IACnB,MAAM,IAAI,MAAM;AAClB;AAEA,qDAAqD;AACrD,MAAM,SAAS;IACb,OAAO,gHAAM,CAAC,UAAU,CAAC,gBAAgB,QAAQ;AACnD;AASO,SAAS,QAAQ,IAAY;IAClC,MAAM,KAAK,gHAAM,CAAC,WAAW,CAAC;IAC9B,MAAM,MAAM;IAEZ,MAAM,SAAS,gHAAM,CAAC,cAAc,CAAC,WAAW,KAAK;IAErD,IAAI,YAAY,OAAO,MAAM,CAAC,MAAM,QAAQ;IAC5C,aAAa,OAAO,KAAK,CAAC;IAE1B,MAAM,UAAU,OAAO,UAAU;IAEjC,OAAO;QACL;QACA,IAAI,GAAG,QAAQ,CAAC;QAChB,SAAS,QAAQ,QAAQ,CAAC;IAC5B;AACF;AAGO,SAAS,QAAQ,aAA4B;IAClD,MAAM,MAAM;IACZ,MAAM,KAAK,OAAO,IAAI,CAAC,cAAc,EAAE,EAAE;IACzC,MAAM,UAAU,OAAO,IAAI,CAAC,cAAc,OAAO,EAAE;IAEnD,MAAM,WAAW,gHAAM,CAAC,gBAAgB,CAAC,WAAW,KAAK;IACzD,SAAS,UAAU,CAAC;IAEpB,IAAI,YAAY,SAAS,MAAM,CAAC,cAAc,SAAS,EAAE,UAAU;IACnE,aAAa,SAAS,KAAK,CAAC;IAE5B,OAAO;AACT","debugId":null}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/FE%20Task/product-card/components/SurveyList.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/SurveyList.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/SurveyList.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA6R,GAC1T,2DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 84, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/FE%20Task/product-card/components/SurveyList.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/SurveyList.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/SurveyList.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAyQ,GACtS,uCACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/FE%20Task/product-card/app/page.tsx"],"sourcesContent":["import { decrypt } from '@/lib/encryption';\nimport { Survey } from '@/types/survey';\nimport SurveyList from '@/components/SurveyList';\n\nasync function getSurveys(): Promise<Survey[]> {\n  try {\n    // Fetch encrypted data from our API route\n    const baseUrl = process.env.NEXT_PUBLIC_BASE_URL || 'http://localhost:3000';\n    const response = await fetch(`${baseUrl}/api/surveys`, {\n      cache: 'no-store',\n    });\n\n    if (!response.ok) {\n      throw new Error('Failed to fetch surveys');\n    }\n\n    const result = await response.json();\n\n    if (!result.success) {\n      throw new Error('API returned error');\n    }\n\n    // Decrypt the payload on the server\n    const decryptedPayload = decrypt(result.data);\n    const surveys: Survey[] = JSON.parse(decryptedPayload);\n\n    return surveys;\n  } catch (error) {\n    console.error('Error fetching surveys:', error);\n    return [];\n  }\n}\n\nexport default async function Home() {\n  // Server-side data fetching with decryption\n  const surveys = await getSurveys();\n\n  return (\n    <main className=\"min-h-screen bg-linear-to-br from-gray-50 via-blue-50 to-gray-100\">\n      {/* Hero Section */}\n      <section className=\"bg-linear-to-r from-blue-600 to-blue-800 text-white py-12 px-4 sm:px-6 lg:px-8 shadow-lg\">\n        <div className=\"max-w-7xl mx-auto\">\n          <h1 className=\"text-4xl sm:text-5xl font-extrabold mb-4\">\n            Secure Survey Dashboard\n          </h1>\n          <p className=\"text-lg text-blue-100 max-w-3xl\">\n            End-to-end encrypted patient surveys with server-side decryption for maximum security\n          </p>\n          <div className=\"mt-4 flex items-center gap-2\">\n            <div className=\"w-3 h-3 bg-green-400 rounded-full animate-pulse\"></div>\n            <span className=\"text-sm text-blue-100\">\n              All data encrypted with AES-256-GCM\n            </span>\n          </div>\n        </div>\n      </section>\n\n      {/* Survey List */}\n      <SurveyList initialSurveys={surveys} />\n\n      {/* Footer */}\n      <footer className=\"bg-white border-t border-gray-200 mt-16 py-8\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center text-gray-600\">\n            <p className=\"text-sm mb-2\">\n              Built with Next.js 16, TypeScript, and Framer Motion\n            </p>\n            <p className=\"text-xs text-gray-500\">\n              A Frontend Assessment for Jasper Colin @{new Date().getFullYear()} Copyright :)\n            </p>\n          </div>\n        </div>\n      </footer>\n    </main>\n  );\n}"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,eAAe;IACb,IAAI;QACF,0CAA0C;QAC1C,MAAM,UAAU,6DAAoC;QACpD,MAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,YAAY,CAAC,EAAE;YACrD,OAAO;QACT;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,IAAI,MAAM;QAClB;QAEA,MAAM,SAAS,MAAM,SAAS,IAAI;QAElC,IAAI,CAAC,OAAO,OAAO,EAAE;YACnB,MAAM,IAAI,MAAM;QAClB;QAEA,oCAAoC;QACpC,MAAM,mBAAmB,IAAA,4HAAO,EAAC,OAAO,IAAI;QAC5C,MAAM,UAAoB,KAAK,KAAK,CAAC;QAErC,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,EAAE;IACX;AACF;AAEe,eAAe;IAC5B,4CAA4C;IAC5C,MAAM,UAAU,MAAM;IAEtB,qBACE,8OAAC;QAAK,WAAU;;0BAEd,8OAAC;gBAAQ,WAAU;0BACjB,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;sCAA2C;;;;;;sCAGzD,8OAAC;4BAAE,WAAU;sCAAkC;;;;;;sCAG/C,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;;;;;8CACf,8OAAC;oCAAK,WAAU;8CAAwB;;;;;;;;;;;;;;;;;;;;;;;0BAQ9C,8OAAC,oIAAU;gBAAC,gBAAgB;;;;;;0BAG5B,8OAAC;gBAAO,WAAU;0BAChB,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,WAAU;0CAAe;;;;;;0CAG5B,8OAAC;gCAAE,WAAU;;oCAAwB;oCACM,IAAI,OAAO,WAAW;oCAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOhF","debugId":null}}]
}